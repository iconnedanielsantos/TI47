(window.LVWebpackJsonp=window.LVWebpackJsonp||[]).push([[18],{1307:function(t,o,e){"use strict";e.r(o),e.d(o,"default",(function(){return w}));e(1),e(970);var c=e(339),n=e(265),r=e(903),d=e(12),l=e(83),k=e(22),f=e(4),h=e(315);function w(t){const{locale:o}=Object(d.d)(t),{client:e}=t.app.$publicAtg;return{getProduct:async function(d){let{productId:l,currentSkuId:w,isExclusiveSalesEnabled:L,isMinimal:S,businessContext:m}=d;const v=L&&!!l&&await async function(t){const c={method:"get",url:"".concat(o,"/catalog/product/exclusive/check/").concat(t)},{data:data}=await e.request(c);return(null==data?void 0:data.isExclusive)||!1}(l),E={method:"get",url:v?"".concat(o,"/catalog/product/exclusive/").concat(l):"".concat(o,"/catalog/product/").concat(l),...m?{headers:{[h.c]:m}}:{}},{data:data}=await e.request(E),{product:I,relatedProducts:x,similarProducts:y,fluidLink:O}=Object(c.a)(data),P=w||I.defaultSkuId,j=Object(k.e)(I,P);if(!j)throw new n.a("DefaultSku cannot be retrieved",404);if(j.isBundle&&j.bundleSkuIds.length>0){const o=await t.app.$domain.catalog.getSkuList({skus:j.bundleSkuIds,precision:"high"})||[];j.bundleSkuIds=Object(c.c)(o)}const C={product:I,relatedProducts:x,similarProducts:y,fluidLink:O,isExclusive:v};if(S)return C;const[$,A,D]=await Object(r.c)([{condition:!I.isLook&&!t.store.getters[f.LOCALE_CONTEXT_IS_SAFE_DISPLAY],apply:()=>t.app.$domain.catalog.getTheLook({skuId:P,viewByLookFromSkusEnabled:t.store.state.configuration.viewByLookFromSkusEnabled}).catch((()=>({})))},{condition:!I.isLook,apply:()=>t.app.$domain.catalog.getPersoDetails({skuId:P}).catch((()=>({})))},{condition:!!l&&!I.isLook,apply:()=>t.app.$domain.editorial.getPageEdito({productId:l}).catch((()=>({})))}]);return{...C,persoDetails:A,thelook:$,pageEdito:D}},getSkuList:async function(t){let{skus:c=[],precision:n="low",skuContext:d,sort:k=!0,businessContext:f}=t;return(await Object(r.b)(c,(async t=>{const c={method:"get",url:"".concat(o,"/catalog/").concat(d?"".concat(d,"-"):"","skus/").concat(t.join(","),"/").concat(n),...f?{headers:{[h.c]:f}}:{}},{data:data}=await e.request(c);return data}),{maxSize:50,sort:k})).flatMap((data=>{var t;return(null===(t=null==data?void 0:data.skuList)||void 0===t?void 0:t.map(l.p))||[]}))}}}},970:function(t,o,e){"use strict";e(546)("flatMap")}}]);
//# sourceMappingURL=_nuxt/11609517983/cc975-f7ea7.js.map